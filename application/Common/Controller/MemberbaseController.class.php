<?phpnamespace Common\Controller;use Common\Controller\HomebaseController;class MemberbaseController extends HomebaseController{		function _initialize() {		parent::_initialize();				$this->check_login();		$this->check_user();		$this->initNav();		$this->getcompany();		if(!(MODULE_NAME == 'User' && CONTROLLER_NAME == 'Profile' && ACTION_NAME == 'mobile')) {			$this->check_mobile();		}	}	function getcompany() {		$com = M('Users_company')->where(array('uid'=>$this->user['id']))->find();		if(!$com) {			$data = array(				'uid'     => $this->user['id'],				'name'    => $this->user['user_nicename'],				'phone'   => '',				'about'   => '',				'culture' => '',				'honor'   => '',				'pics'    => '',			);			M('Users_company')->add($data);			$this->user['com'] = $data;		} else {			$com['about']   = htmlspecialchars_decode($com['about']);			$com['culture'] = htmlspecialchars_decode($com['culture']);			$com['honor']   = json_decode($com['honor'], true);			$com['pics']    = json_decode($com['pics'], true);			$this->user['com'] = $com;		}		$this->assign('com', $com);	}	function initNav() {		$navs = array(			array('name' => '会员信息', 'module' => 'Qrcode', 'controller' => 'Profile', 'action' => 'index', 'icon' => 'fa-user'),			array('name' => '产品分类', 'module' => 'Qrcode', 'controller' => 'Center', 'action' => 'category', 'icon' => 'fa-star-o'),			array('name' => '产品管理', 'module' => 'Qrcode', 'controller' => 'center', 'action' => 'product', 'icon' => 'fa-comments-o'),			array('name' => '批次管理', 'module' => 'Qrcode', 'controller' => 'center', 'action' => 'order', 'icon' => 'fa-qrcode'),			array('name' => '广告图片', 'module' => 'Qrcode', 'controller' => 'center', 'action' => 'ad', 'icon' => 'fa-image'),			array('name' => '营销二维码', 'module' => 'Qrcode', 'controller' => 'center', 'action' => 'redbag', 'icon' => 'fa-weixin'),			array('name' => '渠道商管理', 'module' => 'Qrcode', 'controller' => 'agent', 'action' => 'index', 'icon' => 'fa-users'),			array('name' => '批量溯源', 'module' => 'Qrcode', 'controller' => 'center', 'action' => 'batch_trace', 'icon' => 'fa-rocket'),			array('name' => '数据统计', 'module' => 'Qrcode', 'controller' => 'Statistics', 'action' => 'index', 'icon' => 'fa-bar-chart'),            array('name' => '使用手册', 'url' => 'http://suyuan.hryw888.com/help/index.html' , 'icon' => 'fa-book'),		);		foreach($navs as $key => $val) {			$val['active'] = 0;			if($val['module'] == MODULE_NAME && $val['controller'] == CONTROLLER_NAME && $val['action'] == ACTION_NAME) {				$val['active'] = 1;			}			$navs[$key] = $val;		}		$this->assign('usernavs', $navs);	}}